$.Class({namespace:"ice",consts:{ICE:"[data-ice]",SPLITTER:"|"},events:{click:["a","button","div","p"],change:["input","select","textarea"],submit:["form"]},init:function(){this.registerIceEvents(this),this.startListeners(this)},startListeners:function(t){$.each(t.events,function(e){t.addDefaultListener(e)})},addDefaultListener:function(t,e){$("body").on(t,this.buildPreStrListener(e),function(t){var e=$(this);e.prop("disabled")||e.attr("disabled")||ice.call(e,t)})},addListener:function(t){$("body").on(t,this.buildStrListener(t),function(t){var e=$(this);e.prop("disabled")||e.attr("disabled")||ice.call(e,t)})},call:function(t,e){var n=this.callable($(t),e.type),i=this.getArguments($(t)),s=context=window;$.each(n,function(t,e){"undefined"!=typeof s.getType&&"Class"===s.getType()&&(context=s),"undefined"!=typeof s[e]&&(s=s[e])}),s!==window?$.proxy(s,context,i,$(t),e)():null},callback:function(t,e){var n=context=window;$(t).data("iceCallback")&&($.each($(t).data("iceCallback").split("."),function(t,e){"undefined"!=typeof n.getType&&"Class"===n.getType()&&(context=n),"undefined"!=typeof n[e]&&(n=n[e])}),$.proxy(n,context,e,$(t))())},callable:function(t,e){return t.data("ice").replace(e+this.SPLITTER(),"").split(".")||null},getArguments:function(t){return t.data("iceParams")||null},registerIceEvents:function(t){$(this.ICE().replace("]","-event]")).each(function(){-1==$.inArray($(this).data("iceEvent"),t.events)&&t.events.push($(this).data("iceEvent"))})},registerEvent:function(t){-1==$.inArray(t,this.events)&&(this.events.push(t),this.addListener(t))},buildStrListener:function(t){return this.ICE().replace("]",'^="'+t+'"]')},buildPreStrListener:function(t){var e=[];for(var n in t)e.push(selector[n]+this.ICE());return e.join(", ")}});